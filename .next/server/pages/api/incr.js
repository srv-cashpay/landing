"use strict";(()=>{var e={};e.id=614,e.ids=[614],e.modules={145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},620:(e,t,n)=>{n.r(t),n.d(t,{config:()=>f,default:()=>c,routeModule:()=>w});var i={};n.r(i),n.d(i,{config:()=>l,default:()=>incr});var r=n(1802),a=n(7153),s=n(6249);let u=require("@upstash/redis");var o=n(3141);let d=u.Redis.fromEnv(),l={runtime:"nodejs"};async function incr(e){let t;if("POST"!==e.method)return new o.Z("use POST",{status:405});if("application/json"!==e.headers.get("Content-Type"))return new o.Z("must be json",{status:400});let n=await e.json();if("slug"in n&&(t=n.slug),!t)return new o.Z("Slug not found",{status:400});let i=e.ip;if(i){let e=await crypto.subtle.digest("SHA-256",new TextEncoder().encode(i)),n=Array.from(new Uint8Array(e)).map(e=>e.toString(16).padStart(2,"0")).join(""),r=await d.set(["deduplicate",n,t].join(":"),!0,{nx:!0,ex:86400});r||new o.Z(null,{status:202})}return await d.incr(["pageviews","projects",t].join(":")),new o.Z(null,{status:202})}let p=r.PagesAPIRouteModule,c=(0,s.l)(i,"default"),f=(0,s.l)(i,"config"),w=new p({definition:{kind:a.x.PAGES_API,page:"/api/incr",pathname:"/api/incr",bundlePath:"",filename:""},userland:i})}};var t=require("../../webpack-api-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),n=t.X(0,[16],()=>__webpack_exec__(620));module.exports=n})();